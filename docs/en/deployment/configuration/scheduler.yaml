# scheduler policy configuration
scheduler:
  # algorithm configuration to use different scheduling algorithms,
  # default configuration supports "default" and "ml"
  # "default" is the rule-based scheduling algorithm, "ml" is the machine learning scheduling algorithm
  # It also supports user plugin extension, the algorithm value is "plugin",
  # and the compiled `d7y-scheduler-plugin-evaluator.so` file is added to
  # the dragonfly working directory plugins
  algorithm: default
  # workerNum is the number of goroutines that perform scheduling tasks
  workerNum: 10
  # backSourceCount is the number of backsource clients when the CDN is unavailable
  backSourceCount: 3
  # gc metadata configuration
  gc:
    # taskGCInterval task's gc interval
    taskGCInterval: 1m
    # taskTTL task's TTL duration
    taskTTL: 10m

# server scheduler instance configuration
server:
  # ip
  # ip: 127.0.0.1
  # host
  # host: localhost
  # ListenPort is the ip and port scheduler server listens on.
  port: 8002

  # cacheDir is dynconfig cache storage directory
  # in linux, default value is /var/cache/dragonfly
  # in macos(just for testing), default value is /Users/$USER/.dragonfly/cache
  cacheDir: ""

  # logDir is the log storage directory
  # in linux, default value is /var/log/dragonfly
  # in macos(just for testing), default value is /Users/$USER/.dragonfly/logs
  logDir: ""

# dynamic data configuration
dynConfig:
  # dynamic config refresh interval
  refreshInterval: 5 * time.Minute

# manager configuration
manager:
  # addr manager access address
  addr: 127.0.0.1:65003
  # schedulerClusterID cluster id to which scheduler instance belongs
  schedulerClusterID: 1
  # keepAlive keep alive configuration
  keepAlive:
    # interval
    interval: 5s

# scheduler host configuration
host:
  # idc is the idc of scheduler instance
  idc: ""
  # netTopology is the net topology of scheduler instance
  netTopology: ""
  # location is the location of scheduler instance
  location: ""

# machinery async job configuration, see https://github.com/RichardKnop/machinery
job:
  # globalWorkerNum
  globalWorkerNum: 2
  # schedulerWorkerNum
  schedulerWorkerNum: 3
  # localWorkerNum
  localWorkerNum: 3
  # redis configuration
  redis:
    # host
    host: ""
    # port
    port: 6379
    # password
    password: ""
    # brokerDB
    brokerDB: ""
    # backendDB
    backendDB: ""

# console shows log on console
console: false

# Whether to enable debug level logger and enable pprof
verbose: false

# listen port for pprof, only valid when the verbose option is true
# default is -1. If it is 0, pprof will use a random port.
pprofPort: -1

# jaeger endpoint url, like: http://jaeger.dragonfly.svc:14268/api/traces
jaeger: ""

# service name used in tracer
service-name: dragonfly-scheduler
# enable prometheus metrics
# metrics:
#  # metrics service address
#  addr: ":8000"
#  # enable peer host metrics
#  enablePeerHost: false
