# scheduler 调度策略配置
scheduler:
  # algorithm 使用不同调度算法配置，当前默认支持 "default" 和 "ml" 两种类型
  # "default" 为基于规则的调度算法, "ml" 为基于机器学习的调度算法
  # 也支持用户 plugin 扩展的方式，值为 "plugin"
  # 并且在 dragonfly 工作目录 plugins 中添加编译好的 `d7y-scheduler-plugin-evaluator.so` 文件
  algorithm: default
  # workerNum 执行调度任务处理的 goroutine 数量
  workerNum: 10
  # backSourceCount 回源客户端的数量
  backSourceCount: 3
  # gc 元数据回收策略
  gc:
    # taskGCInterval task 的回收间隔
    taskGCInterval: 1m
    # taskTTL task 的离开时间, 距离上次 task 的访问时间超过改值则 task 会被设置成 leave 状态
    taskTTL: 10m

# server scheduler 服务实例配置信息
server:
  # ip
  # ip: 127.0.0.1
  # host
  # host: localhost
  # ListenPort is the ip and port scheduler server listens on.
  port:
  # daemon 动态配置缓存目录
  # linux 上默认目录 /var/cache/dragonfly
  # macos(仅开发、测试), 默认目录是 /Users/$USER/.dragonfly/cache
  cacheDir: ""

  # daemon 日志目录
  # linux 上默认目录 /var/log/dragonfly
  # macos(仅开发、测试), 默认目录是 /Users/$USER/.dragonfly/logs
  logDir: ""

# 动态数据配置
dynConfig:
  # refreshInterval 动态数据刷新间隔时间
  refreshInterval: 5 * time.Minute

# manager 配置
manager:
  # addr manager 访问地址
  addr: ""
  # schedulerClusterID 要注册的 scheduler 集群 ID
  schedulerClusterID:
  # keepAlive 和 manager 保持心跳的配置
  keepAlive:
    # interval 保持心跳的时间间隔
    interval: 5s

# scheduler 自身主机信息
host:
  # idc 实例所在机房
  idc: ""
  # netTopology 实例网络拓扑信息
  netTopology: ""
  # location 实例所在的地理位置信息
  location: ""

# machinery 异步任务配置，配置参考 https://github.com/RichardKnop/machinery
job:
  # globalWorkerNum
  globalWorkerNum: 2
  # schedulerWorkerNum
  schedulerWorkerNum: 3
  # localWorkerNum
  localWorkerNum: 3
  # redis configuration
  redis:
    # host redis 服务实例地址
    host: ""
    # port redis 服务实例端口
    port: 6379
    # password
    password: ""
    # brokerDB
    brokerDB: ""
    # backendDB
    backendDB: ""

# Console 是否在控制台程序中显示日志
console: false

# verbose 是否使用调试级别的日志、是否启用 pprof。
verbose: false

# pprofPort pprof 监听的端口，仅在 verbose 为 true 时可用
pprofPort: -1

# jaeger 地址
# 默认使用空字符串（不配置 jaeger）, 例如: http://jaeger.dragonfly.svc:14268/api/traces
jaeger: ""

# tracer 中使用的 service-name
service-name: dragonfly-scheduler
# 开启数据收集服务
# metrics:
#  # 数据服务地址
#  addr: ":8000"
#  # 收集 host 数据
#  enablePeerHost: false
